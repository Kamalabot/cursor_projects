<div class="d-flex align-items-center">
    <div style="width: 200px; margin-left: 50px">
        <span class="fw-bold">Title</span>
    </div>
    <div style="width: 200px">
        <span class="fw-bold">Date Created</span>
    </div>
    <div style="width: 200px">
        <span class="fw-bold">Target Date</span>
    </div>
</div>
<!-- Tasks variable is coming from the app.py file -->
{% for task in tasks %}
<div class="card mb-2">
    <div class="card-body d-flex align-items-center">
        <div style="width: 200px">    
            <!-- the post request is sent to the toggle_task function in app.py -->
            <!--Entire table is updated with data from the database-->
            <input type="checkbox" 
                   {% if task.completed %}checked{% endif %}
                   hx-post="/tasks/{{ task.id }}/toggle"
                   hx-target="#task-list"
                   class="form-check-input me-2">
            <span class="{% if task.completed %}text-muted text-decoration-line-through{% endif %}">
                {{ task.title }}
            </span>
        </div>
        <div class="d-flex justify-content-between" style="flex-grow: 1">
            <span class="{% if task.completed %}text-muted text-decoration-line-through{% endif %}">
                {{ task.created_at.strftime('%Y-%m-%d') }}
            </span>
            <span class="{% if task.completed %}text-muted text-decoration-line-through{% endif %}">
                {{ task.target_date.strftime('%Y-%m-%d') if task.target_date else 'No target date' }}
            </span>
            <button class="btn btn-danger btn-sm"
                    hx-delete="/tasks/{{ task.id }}/delete"
                    hx-target="#task-list">
                Delete
            </button>
        </div>
    </div>
</div>
{% else %}
<div class="text-center text-muted">
    No tasks yet. Add one above!
</div>
{% endfor %}